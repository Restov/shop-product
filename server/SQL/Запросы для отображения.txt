Страница с разделами каталога
SELECT categories.id,categories.name, COUNT(*) AS product_count 
FROM categories 
INNER JOIN product_categories ON categories.id = product_categories.category_id 
GROUP BY category_id 
ORDER BY `product_count` DESC;
Вернёт все разделы в порядке убывания товаров (без пустых разделов)

5a. SELECT categories.id,categories.name, COUNT(*) AS product_count 
FROM categories 
LEFT JOIN product_categories ON categories.id = product_categories.category_id 
GROUP BY category_id
ORDER BY `product_count` DESC;

5b. SELECT categories.id,categories.name, COUNT(*) AS product_count 
FROM categories 
INNER JOIN product_categories ON categories.id = product_categories.category_id 
GROUP BY category_id 
HAVING product_count >= 2 ORDER BY `product_count` DESC;

Клик на раздел
Данные по разделу - SELECT name,description FROM categories WHERE id = :id;

Вывод всех карточек 

SELECT DISTINCT products.id, products.title, images.ref, images.alt, cat2.name AS main_cat
FROM product_categories
INNER JOIN products ON product_categories.product_id = products.id 
INNER JOIN categories ON product_categories.category_id = categories.id 
INNER JOIN product_main_images ON products.id = product_main_images.product_id
INNER JOIN images ON product_main_images.image_id = images.id
INNER JOIN product_main_categories ON product_main_categories.product_id = products.id
INNER JOIN categories AS cat2 on product_main_categories.category_id = cat2.id
WHERE categories.id = :cat_id AND products.quantity > 0
LIMIT 12 
OFFSET :offset; ($offset = $page * 12)

Карточка товара
SELECT title, price, price_no_discount, price_promo, description
FROM products
WHERE id = :id;

Все категории товара в карточке
SELECT DISTINCT categories.name
FROM product_categories
INNER JOIN categories ON categories.id = product_categories.category_id
WHERE product_id = :id;

Все картинки товара в карточке
SELECT DISTINCT images.ref, images.alt
FROM product_images
INNER JOIN images ON images.id = product_images.image_id
WHERE product_id = :id;